# Source and target of a Message reference must be in the same
# eventContainerwith the exception of references pointing to
# the `Create` message.
prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#>
prefix msg: <https://w3id.org/won/message#>
prefix won: <https://w3id.org/won/model#>
select * where {
  ?cnt rdfs:member ?msg .
  ?cnt2 rdfs:member ?msg2 .
  ?msg msg:hasPreviousMessage ?msg2 .
  ?msg2 msg:hasMessageType ?targetType .
  filter (?cnt != ?cnt2 && ?targetType != msg:CreateMessage)
}
